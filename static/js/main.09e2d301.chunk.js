(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(n,e,t){n.exports=t(78)},53:function(n,e,t){},55:function(n,e,t){},67:function(n,e){},69:function(n,e){},78:function(n,e,t){"use strict";t.r(e);var a=t(1),o=t.n(a),r=t(46),i=t.n(r),c=(t(53),t(23)),l=t(24),u=t(26),s=t(25),f=t(27),h=(t(55),t(47)),m=t(34),p=t.n(m),d={1:"#66CC66",2:"#3366FF",3:"#CC0000",4:"#330000"},g="whole",v="half",w="eighth",O="16th",y="32nd",x="th",C=function(n){return new Promise(function(e){var t=new p.a.Parser,a=new p.a.Builder;t.parseString(n,function(n,t){t["score-partwise"].part.forEach(function(n){n.measure.forEach(function(n){var e=b(n);n.note.forEach(function(n){n.$=n.$||{},n.$.color=d[e]})})});var o=a.buildObject(t);e(o)})})},b=function(n){var e=E(n)>0?Math.min(7+5*E(n),20):0,t=S(n)>0?Math.min(7+5*S(n),15):0,a=M(n)>0?Math.min(7+5*M(n),15):0,o=k(n),r=L(n);return Math.min(Math.ceil((e+t+a+o+r)/16),4)||1},M=function(n){var e=0;return n.note.forEach(function(n){n.notations&&n.notations[0]&&n.notations[0].tuplet&&++e}),Math.ceil(e/2)},E=function(n){return n.note.filter(function(n){return void 0!==n.grace&&(n.grace[0]&&n.grace[0]&&n.grace[0].$&&n.grace[0].$.slash||n.notations&&n.notations[0]&&n.notations[0].slur&&n.notations[0].slur[0]&&n.notations[0].slur[0].$&&"start"===n.notations[0].slur[0].$.type)}).length},S=function(n){return n.note.filter(function(n){return n.notations&&n.notations[0]&&n.notations[0].ornaments&&n.notations[0].ornaments[0]&&void 0!==n.notations[0].ornaments[0]["trill-mark"]}).length},j=function(n){if(n.pitch){var e=n.pitch[0];return(e.step?e.step[0]:"")+(e.octave?e.octave[0]:"")+(e.alter?e.alter[0]:"")}return""},k=function(n){var e=[],t="";n.note.forEach(function(a,o){""===t?a.chord&&o>0&&(t=j(n.note[o-1])+" "+j(a)):a.chord?t+=" "+j(a):""!==t&&(e.push(t),t="")});var a=e.filter(function(n,e,t){return t.indexOf(n)===e});if(0===a.length)return 0;var o=Math.min(3*a.filter(function(n){return n.split(" ").length>=4}).length,6)+Math.min(5*a.filter(function(n){return n.split(" ").length>=5}).length,10);return Math.min(3*a.length,10)+o},L=function(n){var e={},t=function(t){return e[t]/n.note.length*100};if(n.note.forEach(function(n){e[n.type]?++e[n.type]:e[n.type]=1}),e[x]||t(y)>=30)return 20;var a=0;return t(y)>0&&t(y)<30&&(a+=10),t(O)>=30&&(a+=8),t(O)>0&&t(O)<30&&(a+=5),t(w)>=30&&(a+=5),t(w)>0&&t(w)<30&&(a+=2),t(v)>=30&&(a-=5),t(v)>0&&t(v)<30&&(a-=3),t(g)>0&&(a-=5),2*Math.min(a,20)},$=function(n){function e(){var n,t;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(t=Object(u.a)(this,(n=Object(s.a)(e)).call.apply(n,[this].concat(o)))).selectSampleOnChange=function(n){t.state.openSheetMusicDisplay.load(n).then(function(){return t.state.openSheetMusicDisplay.render()},function(n){return t.errorLoadingOrRenderingSheet(n,"rendering")})},t.errorLoadingOrRenderingSheet=function(n,e){var t="Error "+e+" sheet: "+n;t+="\nStackTrace:\n"+n.stack,console.warn(t)},t.uploadFile=function(n){var e=n.target.files[0],a=new FileReader,o=e.name;a.onload=function(n){t.selectSampleOnChange(n.target.result);var e=n.target.result;o.toLowerCase().indexOf(".musicxml")>0||o.toLowerCase().indexOf(".xml")>0?C(e).then(function(n){t.selectSampleOnChange(n)}).catch(function(n){console.warn("Can't analize this file.")}):console.warn("Can't analize this type of file. Please upload .musicxml or .xml")},o.toLowerCase().indexOf(".xml")>0||o.toLowerCase().indexOf(".musicxml")>0?a.readAsText(e):o.toLowerCase().indexOf(".mxl")>0?a.readAsBinaryString(e):alert("No vaild .xml/.mxl/.musicxml file!")},t}return Object(f.a)(e,n),Object(l.a)(e,[{key:"componentDidMount",value:function(){var n=this,e=document.createElement("div");this.setState({canvas:e,openSheetMusicDisplay:new h.OpenSheetMusicDisplay(e,{autoResize:!0,backend:"canvas",coloringEnabled:!0})},function(){n.state.openSheetMusicDisplay.setLogLevel("info")}),document.body.appendChild(e)}},{key:"render",value:function(){return o.a.createElement("span",null,o.a.createElement("input",{type:"file",name:"myFile",onChange:this.uploadFile}))}}]),e}(a.Component),D=function(n){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(f.a)(e,n),Object(l.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement($,null))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[48,2,1]]]);
//# sourceMappingURL=main.09e2d301.chunk.js.map